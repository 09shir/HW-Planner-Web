<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Assignment</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

    <!-- <script src="src/createHW.js"></script> Links my java script file-->

</head>
<body>

    <style>
        body {
            font-family: Verdana;
        }
        .center-horizontal {
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .header {
          width: 100%;
          padding:5px 0px;
          text-align: center;
          background: #4c5270;
          color: white;
          height: 60px;
          position: fixed;
          font-family: Papyrus;
          font-size:large;
          top: 0;
      }
        h1 {
            font-size: 1.5em;
            padding: 10px 0;
            font-weight: 800;
        }
    </style>

    </br>

    <div class="header">
        <h1>ADD New Assignment</h1>
    </div>

    </br></br></br></br>
    
    <!-- HWName course dueDate priority comments-->
    <form name="Form" action="/add" method="POST">
        <div class="center-horizontal">
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="HWName" class="col-form-label">Assignment Name: </label>
                </div>
                <div class="col-auto">
                    <input type="text" id="HWName" name="HWName" class="form-control">
                </div>
                <div class="col-auto">
                    <span id="passwordHelpInline" class="form-text">
                        (input must be required)
                    </span>
                </div>
            </div>
        </div>
        </br>
        <div class="center-horizontal">
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="course" class="col-form-label">Course ID: </label>
                </div>
                <div class="col-auto">
                    <input type="text" id="course" name="course" class="form-control">
                </div>
                <div class="col-auto">
                    <span id="passwordHelpInline" class="form-text">
                      (ie. CMPT 225)
                    </span>
                </div>
            </div>
        </div>
        </br>
        <div class="center-horizontal">
            <div class="row g-3 align-items-center">
                <!-- (yyyy-mm-dd) -->
                <div class="col-auto">
                    <label for="dueDate" class="col-form-label">Due Date: </label>
                </div>
                <div class="col-auto">
                    <input type="text" id="dueDate" name="dueDate" class="form-control">
                </div>
                <div class="col-auto">
                    <span id="passwordHelpInline" class="form-text">
                      (yyyy-mm-dd)
                    </span>
                </div>
            </div>
        </div>
        </br>
        <div class="center-horizontal">
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="priority" class="col-form-label">Priority: </label>
                </div>
                <div class="col-auto">
                    <input type="text" id="priority" name="priority" class="form-control">
                </div>
                <div class="col-auto">
                    <span id="passwordHelpInline" class="form-text">
                      (enter 1~3)
                    </span>
                </div>
            </div>
        </div>
        </br>
        <div class="center-horizontal">
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="comments" class="col-form-label">Comments: </label>
                </div>
                <div class="col-auto">
                    <input type="text" id="comments" name="comments" class="form-control">
                </div>
                <div class="col-auto">
                    <span id="passwordHelpInline" class="form-text">
                        (input optional)
                    </span>
                </div>
            </div>
        </div>
    </div>
        </br>
        <div class="center-horizontal gap-4">
            <button type="submit" href="index.html" onclick="return validateForm();" class="btn btn-primary";">Submit</button>
            <button type="button" class="btn btn-primary" onclick="window.location.href='index.html';">Cancel</button>
        </div>
    </form>
    
    <script>

        /*var courses = [];

        const url = 'http://www.sfu.ca/bin/wcm/course-outlines?2023/spring';

        async function fetchSFUDepartments() {
            const response = await fetch('http://www.sfu.ca/bin/wcm/course-outlines?2023/spring');
            const body = await response.json();

            for (let i = 0; i < body.length; i++){
                courses.push(body[i].text);
            }

        }
        fetchSFUDepartments();*/

        function validateForm(){
            var a = document.forms["Form"]["HWName"].value;
            var b = document.forms["Form"]["course"].value;
            var c = document.forms["Form"]["dueDate"].value;
            var d = document.forms["Form"]["priority"].value;
            var e = document.forms["Form"]["comments"].value;
            if (a == "" ) { alert("Assignment name must be filled out"); return false;}
            if (b == "" ) { alert("Course ID must be filled out"); return false;}
            if (c == "" ) { alert("Due date must be filled out"); return false;}
            if (d == "" ) { alert("Assignment priority must be filled out"); return false;}
            if (e == "" ) { alert("Assignment comment must be filled out"); return false;}
            if (d != "1" && d != "2" && d != "3" ) { alert("Please enter correct priority number (1~3)"); return false;}
            // yyyy-mm-dd
            if (c.length != 10) { alert("Please enter correct date format (yyyy-mm-dd) incorrect length"); return false;}
            let regExp = /\d/;
            for (let i = 0; i < 10; i++){
                if (i == 4 || i == 7){
                    if (c[i] != '-'){
                        alert("Please enter correct date format (yyyy-mm-dd)"); return false;
                    }
                }
                else if (!regExp.test(c.charAt(i))) {
                    alert("Please enter correct date format (yyyy-mm-dd)"); return false;
                }
            }
            return true;
        }

    </script>
</body>
</html>